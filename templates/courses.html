<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Courses - Syllabot</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/courses.css') }}">
</head>
<body>
  <div class="navbar">
    <div>
      <a href="{{ url_for('index') }}" class="{% if request.endpoint == 'index' %}active{% endif %}" {% if request.endpoint == 'index' %}aria-disabled="true"{% endif %}>Home</a>
      <a href="{{ url_for('cart') }}" class="{% if request.endpoint == 'cart' %}active{% endif %}" {% if request.endpoint == 'cart' %}aria-disabled="true"{% endif %}>Shopping Cart</a>
      <a href="{{ url_for('courses') }}" class="{% if request.endpoint == 'courses' %}active{% endif %}" {% if request.endpoint == 'courses' %}aria-disabled="true"{% endif %}>Courses</a>
      <a href="{{ url_for('view_schedule') }}" class="{% if request.endpoint == 'view_schedule' %}active{% endif %}" {% if request.endpoint == 'view_schedule' %}aria-disabled="true"{% endif %}>Schedule</a>
    </div>
    <img src="{{ url_for('static', filename='images/profile.webp') }}" alt="Profile Image" class="profile-image">
  </div>

  <div class="content-wrapper">
    <div class="sidebar">
      <h3>Filters</h3>
      <form method="GET" action="{{ url_for('courses') }}">
        <div class="dropdown">
          <h4>School</h4>
          <ul>
            {% for school in all_schools %}
              <li>
                <label>
                  <input type="checkbox" name="school" value="{{ school }}" {% if school in selected_schools %}checked{% endif %}>
                  {{ school }}
                </label>
              </li>
            {% endfor %}
          </ul>
        </div>

        <div class="dropdown">
          <h4>Status</h4>
          <ul>
            {% for stat in ['Open','Closed','Wait List'] %}
              <li>
                <label>
                  <input type="checkbox" name="status" value="{{ stat }}" {% if stat in selected_statuses %}checked{% endif %}>
                  {{ stat }}
                </label>
              </li>
            {% endfor %}
          </ul>
        </div>

        <div class="dropdown">
          <h4>Credits</h4>
          <ul>
            {% for i in range(5) %}
              <li>
                <label>
                  <input type="checkbox" name="credits" value="{{ i }}" {% if i|string in selected_credits %}checked{% endif %}>
                  {{ i }}
                </label>
              </li>
            {% endfor %}
          </ul>
        </div>

        <button type="submit" class="filter-submit">Show Courses</button>
      </form>
    </div>

    <div class="main-content">
      <header>
        <h1 class="centered-title">Courses</h1>
      </header>
      <div class="content">
        {% for school, courses in courses_by_school.items() %}
          <h2>{{ school }}</h2>
          {% if courses %}
            {% for course in courses %}
              <details>
                <summary>{{ course[1] }} {{ course[0] }}</summary>
                <div class="sections-block">
                  <div>
                    <strong>Course ID:</strong> {{ course[0] }}<br>
                    <strong>Course Name:</strong> {{ course[1] }}<br>
                    <strong>Department Name:</strong> {{ course[2] }}<br>
                    <strong>Credits:</strong> {{ course[3] }}<br>
                    <strong>Description:</strong> {{ course[4] }}<br>
                    <strong>Status:</strong> {{ course[5] }}
                  </div>
                  <hr>
                  {% if sections_by_course[course[0]] %}
                    <ul>
                      {% for section in sections_by_course[course[0]] %}
                        <li>
                          <strong>Section {{ section[6] }} </strong>
                          <strong>Instructor:</strong> {{ instructor_names[section[2]] }}<br>
                          <strong>Term:</strong> {{ section[3] }}<br>
                          <strong>Location:</strong> {{ section[4] }}<br>
                          <strong>Type:</strong> {{ section[5] }}<br>
                          
                          <form method="POST" action="{{ url_for('add_to_cart') }}">
                            <input type="hidden" name="section_id" value="{{ section[0] }}">
                            <button type="submit">Add to Cart</button>
                          </form>
                          <hr style="border: 1px solid rgb(190, 190, 190);">
                        </li>
                      {% endfor %}
                    </ul>
                  {% else %}
                    <p><em>No sections found.</em></p>
                  {% endif %}
                </div>
              </details>
            {% endfor %}
          {% else %}
            <p><em>No courses found.</em></p>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</body>
</html>